# 自动语言检测功能

## 功能说明

应用会根据用户的 IP 地址自动检测地区并设置对应的语言：

- **中国大陆 (CN)** 和 **台湾 (TW)**：使用中文 (zh-CN)
- **其他地区**：使用英文 (en-US)

## 工作原理

1. 首次访问时，应用会调用 `ipapi.co` API 检测用户的 IP 地址和国家代码
2. 根据国家代码自动设置语言
3. 检测结果会保存到 `localStorage`，避免重复检测
4. 用户手动切换语言后，会覆盖自动检测的结果

## 优先级

语言选择的优先级如下：

1. **用户手动选择的语言**（保存在 localStorage）
2. **IP 自动检测的语言**
3. **默认语言**（中文）

## 相关文件

- `src/utils/detectLanguage.ts` - IP 检测和语言判断逻辑
- `src/i18n/config.ts` - i18n 配置和初始化
- `src/components/LanguageSwitcher.tsx` - 语言切换组件

## 注意事项

- IP 检测使用免费 API，有请求限制
- 检测失败时会回退到默认中文
- 检测超时设置为 5 秒
